# pth test script
#
# This file is a test script for pth (Polyglot Test Harness). It
# conforms to the following grammar.
#
#      ScriptFile   ::= CompilerTest+
#      CompilerTest ::= ExtClassName ["CmdLineArgs"] { FileTest [; FileTest]* }
#      FileTest     ::= Filenames [Description] [FailureSet]
#      Filenames    ::= Filename [Filename]*
#      Description  ::= LitString
#      FailureSet   ::= Failure [, Failure]*
#      Failure      ::= ( ErrorKind )
#                    |  ( ErrorKind, "RegExp" )
#                    |  ( "RegExp" )
#                    |  ( )
#      ErrorKind    :   one of, or a unique prefix of one of the following 
#                       strings: "Warning", "Internal Error", "I/O Error", 
#                       "Lexical Error", "Syntax Error", "Semantic Error"
#                       or "Post-compiler Error".
#      Filename     :   the name of a file. Is interpreted from the 
#                       directory where pth is run.
#      LitString    :   a literal string, enclosed in quotes.
#      RegExp       :   a regular expression, as in java.util.regex; 
#                       is always enclosed in quotes.
#      CmdLineArgs  :   additional command line args for the Polyglot 
#                       compiler; is always enclosed in quotes.
#
# When invoking this script, it will probably be necessary to supply
# an appropriate class path:
#    $ pth pthScript -cp "../classes:../lib-classes:."
jif.ExtensionInfo  "-sigcp ../sig-classes -rtcp ../rt-classes" {
        OwnedObject.jif;
        LabeledObject.jif;
	A.jif ;
	Account.jif ;
	ActsFor1.jif ;
	ActsFor2.jif ;
	ActsFor3.jif ;
	ActsFor4.jif ;
	ActsFor5.jif ;
	ActsFor6.jif ;
	ActsFor7.jif (Semantic, "not less restrictive");
	ActsFor8.jif (Semantic, "must be runtime-representable");
	ActsFor9.jif (Semantic, "actsfor .* can only be used");
	ActsFor10.jif ;
	ActsFor11.jif (Semantic, "not less restrictive");
	ActsFor12.jif (Semantic, "not less restrictive");
	ActsFor13.jif (Semantic, "must be runtime-representable");
	ActsFor14.jif (Semantic, "must be runtime-representable");
	ActsFor15.jif (Semantic, "not less restrictive");
	ArgLabelSubst.jif ;
	ArgLabelSubst2.jif ;
	Array.jif ;
	Array1.jif (Semantic, "not a subtype") ;
	Array2.jif ;
	ArrayLeak.jif (Semantic, "not a subtype") ;
	ArrayLeak2.jif (Semantic, "not a subtype") ;
	BadNullExcept1.jif (Semantic, "NullPointerException.*must .* be caught") ;
	BadNullExcept2.jif (Semantic, "NullPointerException.*must .* be caught") ;
	BadNullExcept3.jif (Semantic, "NullPointerException.*must .* be caught") ;
	BadNullExcept4.jif (Semantic, "ArrayIndex.*Exception.*must .* be caught") ;
	BadNullExcept5.jif (Semantic, "NullPointerException.*must .* be caught") ;
	BadNullExcept6.jif (Semantic, "ArrayIndex.*Exception.*must .* be caught") ;
	BadNullExcept7.jif (Semantic, "NullPointerException.*must .* be caught") ;
	Binary.jif ;
	Call1.jif ;
	cat.jif ;
	clientEmptyList.jif ;
	clientList.jif ;
	clientPairList.jif ;
	Complex.jif ;
	CondExpr.jif ;
	ConditionalLeak.jif (Semantic, "not a subtype") ;
	Constraints1.jif ;
	Constraints3.jif ;
	Constraints5.jif ;
	/* KNOWN BAD: tries to translate an "all-runtime" label Constraints7.jif ; */
	ConstructorTest.jif ;
	Declassify.jif ;
	Default1.jif ;
	Deref.jif ;
	Deref2.jif ;
	DuplicateClass.jif (Semantic, "Duplicate class");
	Dyn1.jif ;
	Dyn2.jif ;
	Dyn4.jif ;
	Dyn5.jif ;
	Dyn6.jif ;
	Dyn7.jif ;
	DynPrin1.jif ;
	DynPrin2.jif (Semantic, "Non-final.*access path");
	DynPrin3.jif (Semantic, "type .*must be .*principal");
	DynPrin4.jif (Semantic, "access path .*not a reference type");
	DynPrin5.jif (Semantic, "type .*must be .*principal");
	DynPrin6.jif (Semantic, "Field.*is not final");
	DynPrin7.jif ;
	DynPrin8.jif (Syntax);
	DynLabel1.jif ;
	DynLabel2.jif (Semantic, "Non-final.*access path"), (Semantic, "Non-final.*access path");
	DynLabel3.jif (Semantic, "Field.*is not final"), (Semantic, "Field.*is not final");
	DynLabel4.jif (Semantic, "type .*must be .*label");
	DynLabel5.jif (Semantic, "type .*must be .*label");
	DynLabel6.jif (Semantic, "access path .*not a reference type");
	DynLabel7.jif (Syntax);
	EmptyList.jif List.jif;
	EmptyList2.jif ;
	Exc.jif ;
	Exc2.jif ;
	FieldLeak.jif (Semantic) ;
	FileTester.jif ;
	For1.jif ;
	Hierarchy1.jif ;
	Heapsort.jif ;
	Hello.jif ;
	HiRefLowField.jif (Semantic, "Label .* not less restrictive");
	If1.jif ;
	Implicit.jif ;
	Implicit2.jif ;
	IntPair.jif ;
	InterfaceTest.jif ;
#	InvariantClass.jif (Semantic, "Invariant class .* cannot extend covariant class");
#	InvariantClass1.jif (Semantic, "not a subtype");
#	InvariantClass2.jif (Semantic, "Covariant class .* cannot extend invariant class");
	InvariantClass3.jif;
#	InvariantClass4.jif (Semantic, "not a subtype");
#	InvariantClass4a.jif ;
#	InvariantClass5.jif ;
#	InvariantClass6.jif (Semantic, "not a subtype");
#	InvariantClass7.jif (Semantic, "Invariant class .* cannot implement covariant interface");
#	InvariantClass8.jif (Semantic, "Invariant class .* cannot implement covariant interface");
#	InvariantClass9.jif (Semantic, "Covariant class .* cannot extend invariant class");
	InvariantThis1.jif ;
	InvariantThis2.jif (Semantic, "cannot contain .*this");
	InvariantThis3.jif (Semantic, "cannot contain .*this");
	InvariantThis4.jif (Semantic, "cannot contain .*this");
	LabelIf1.jif ;
	LabelIf2.jif (Semantic, "only be used in an if statement");
	LabelIf3.jif (Semantic, "only be used in an if statement");
	LabelIf4.jif (Semantic, "not representable at runtime");
	LabelIf5.jif ;
	LabelIf6.jif (Semantic, "not less restrictive");
	LabelIf6a.jif (Semantic, "not less restrictive");
	LabelIf7.jif (Semantic, "not less restrictive");
	LabelIf7a.jif (Semantic, "not less restrictive");
	LabelIf8.jif (Semantic, "not less restrictive");
	LabelIf9.jif (Semantic, "not less restrictive");
	LabelIf10.jif (Semantic, "NullPointerException.*declared");
	LabelIf11.jif  (Semantic, "must .* final access path"), (Semantic, "must .* final access path");
	LabelIf12.jif ;
	List.jif ;
	List2.jif ;
	ListTest.jif ;
	Main1.jif (Warning, "signature of.*main method.*should either be"),
                  (Semantic, "Jif allows only one static method named \"main\"");
	Main2.jif ;
	MyInteger.jif ;
	NewLabel.jif ;
	NewLabel2.jif (Semantic, "not representable at runtime");
	NullExcept1.jif ;
	NullExcept2.jif ;
	NullExcept3.jif ;
	NullExcept4.jif ;
	NullExcept5.jif ;
	NullExcept6.jif ;
	NullExcept7.jif ;
	NullExcept8.jif ;
	NullExcept9.jif ;
	PairList.jif  List.jif;
	PairList2.jif ;
	Params1.jif ;
	Params1Test.jif ;
	Params1TestTest.jif ;
	Params2.jif ;
	Params3.jif ;
	Params4.jif ;
	Params5.jif ;
	Params6.jif ;
	Params7.jif ;
	Params8.jif ;
	Params9.jif ;
	Params10.jif ;
	Params11.jif ;
	Params12.jif ;
	Params13.jif (Semantic, "not cast.*covariant.* parameter to.* invariant");
	Params14.jif (Semantic, "not instantiate .* invariant .* parameter with .* non-invariant");
	Params15.jif (Semantic, "must be representable at runtime");
	Params16.jif (Semantic, "Cast an invariant label parameter to a different label");
	Params17.jif (Semantic, "Cast an invariant label parameter to a different label");
	Params18.jif (Semantic, "Cast an invariant label parameter to a different label");
	Params19.jif (Semantic, "not a subtype"); // I think there is an instantiation missing in this test case!
	Params20.jif ;
	Params21.jif (Semantic, "not cast.*covariant.* parameter to.* invariant");
	ParamsActsFor.jif ;
	Password.jif ;
	Password2.jif ;
	Poly.jif ;
	Protected.jif ; 
	Simple.jif ;
	Simple2.jif ;
	Simple3.jif ;
	Simple4.jif ;
	StaticField.jif;
	StaticMethod.jif;
	StaticThis1.jif (Semantic, "this.*cannot be used in a static context");
	StaticThis2.jif (Semantic, "this.*cannot be used in a static context");
	StaticThis3.jif (Semantic, "this.*cannot be used in a static context");
	StaticThis4.jif (Semantic, "this.*cannot be used in a static context");
	StaticThis5.jif (Semantic, "this.*cannot be used in a static context");
	StaticThis6.jif ;
	StringTester.jif ;
	SubtypeChecker1.jif (Semantic, "not a subtype") ;
	SubtypeChecker2.jif ;
	SubtypeChecker3.jif (Semantic, "not a subtype") ;
	SubtypeChecker4.jif (Semantic, "subclass of .*Throwable may not have.* parameters") ;
	Super1.jif (Semantic, "No valid constructor") ;
	Super2.jif ;
	Super3.jif (Semantic, "first statement .* must be .* constructor call") ;
	Super4.jif (Semantic, "first statement .* must be .* constructor call") ;
	Super5.jif ;
	Super6.jif (Semantic, "Final variable.*must be initialized") ;
	SwitchLabel.jif (Semantic, "not representable at runtime");
	SwitchLabel2.jif (Semantic, "not representable at runtime");
	SwitchLabel3.jif (Semantic, "not representable at runtime");
	SwitchLabel4.jif;
	This1.jif ;
#	This2.jif ;
	ToString.jif (Semantic, "Cannot coerce") ;
	User1.jif ;
	Vec.jif ;
	While.jif ; 
}
