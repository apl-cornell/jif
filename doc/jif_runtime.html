<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <link rel=StyleSheet href="jifdoc.css" type="text/css">
   <title>Jif Runtime Interface</title>
</head>
<body>

<h1>
<u>Jif Runtime Interface</u></h1>


<p>To interact with the external environment, Jif provides a runtime
interface to allow Jif code to read and write files, and access stdin,
stdout and stderr, and also to obtain a principal representing the current user. The runtime interface is <code>jif.runtime.Runtime</code>.

<p>Although
the runtime code is itself is written in Java (see $JIF/rt-src/jif/runtime/Runtime.java), a Jif signature is
provided to allow calls to this interface can be checked
statically (see $JIF/sig-src/jif/runtime/Runtime.jif). 

<!--
<p>In addition, the Jif runtime provides a way of translating
file access permissions on Windows and Unix systems to Jif labels. For
instance, if a Jif program opens a file and creates a FileInputStream
object, the FileInputStream object will have a label parameter that
allows only readers who have the read permission of that file
acccording to the access control policy of the file, and any
information read from the file is guarded by the label parameter, thus
cannot be leaked to unauthorized users by Jif codes that pass the
label checking.

<h2>File permissions and Jif labels</h2>
Although the labelling model in Jif can be extended in various ways, the
current model speaks for only the read permission.

<h3>Unix system</h3>
On Unix systems, different file permissions can be specified for the owner
of the file, the group of the file and "others", which represents everyone
in the system. File permissions are mapped to Jif labels according to the
following rules:
    <ul>
    <li>
    If "others" has the read permission, the label is {o:Everyone}.</li>

    <li>
    If "group" has the read permission, the label is {o:g}.</li>
    </ul>
    
Due to the limit expressive power of the Unix file permission model, we
can not accurately map an arbitrary Jif label to file permissions. In such
cases, we have to be conservative. Here is the rules for mapping Jif labels
to file permissions:
    <ul>
    <li> {o:Everyone} is mapped to "-r--r--r--".</li>
    
    <li> {o:} is mapped to "-r--------".</li>

    <li> {o:r1,r2..rn} is mapped to "-r--r-----", if there exists a group G such
    that it exactly has o,r1,r2,..,rn as its members. Otherwise, it is mapped
    to "-r--------".</li>
    </ul>

<h3>Windows system</h3>
On Windows systems, each file has an access control list (ACL), and each
ACL contains a list of access control entry (ACE), and each ACE specifies
the file permission for a given principal. The Jif runtime will traverse
the ACL of a file and find all the users who have the read permission on
the file. Suppose the reader set is R, then the corresponding Jif label
is {o:R}.
<p>Mapping Jif labels to an ACL is straightforward. We simply create an
ACE of the full permissions for the owner and an ACE of the read permission
for each reader.

<h2>Runtime API</h2>
-->
Please refer to the <a href="rt-api/jif/runtime/Runtime.html">Javadoc</a> for more information.
</body>
</html>
